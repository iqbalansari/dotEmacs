* Ensure that required packages are installed
  #+begin_src emacs-lisp
    (iqbal-install-package 'yasnippet)
  #+end_src


* Do not use '~/.emacs.d' in yas-snippets-dir
  Rather use the absolute path to '~/.emacs.d/snippets'
  #+begin_src emacs-lisp
    (with-eval-after-load 'yasnippet
      (setq yas-snippet-dirs (append (list (locate-user-emacs-file "snippets/"))
                                     (remove "~/.emacs.d/snippets" yas-snippet-dirs))))
  #+end_src


* Set verbosity to zero
  #+begin_src emacs-lisp
    (setq yas-verbosity 0)
  #+end_src


* Configuration for expanding snippets
** Disable snippet expansion on tab, it is annoying
  #+begin_src emacs-lisp
    (with-eval-after-load 'yasnippet
      (define-key yas-minor-mode-map (kbd "TAB") nil)
      (define-key yas-minor-mode-map [(tab)] nil))
  #+end_src

** Use company-mode (if enabled) to expand snippet
   #+begin_src emacs-lisp
     (defun iqbal-expand-yas-using-company ()
       (interactive)
       (condition-case err
           (call-interactively #'company-yasnippet)
         (error (when (and (string= (error-message-string err) "Cannot complete at point")
                           (yas--templates-for-key-at-point)))
                (yas-expand))))

     (defun iqbal-expand-yas ()
       (interactive)
       (call-interactively (if (bound-and-true-p company-mode)
                               #'iqbal-expand-yas-using-company
                             #'yas-insert-snippet)))

     (with-eval-after-load 'yasnippet
       (define-key yas-minor-mode-map (kbd "<C-return>") #'iqbal-expand-yas))
   #+end_src


* Enable yasnippet global mode
  #+begin_src emacs-lisp
;    (yas-global-mode)
  #+end_src
