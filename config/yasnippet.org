* Ensure that required packages are installed
  #+BEGIN_SRC emacs-lisp
    (iqbal-install-package 'yasnippet)
  #+END_SRC


* Do not use '~/.emacs.d' in yas-snippets-dir
  Rather use the absolute path to '~/.emacs.d/snippets'
  #+BEGIN_SRC emacs-lisp
    (with-eval-after-load 'yasnippet
      (setq yas-snippet-dirs (append (list (locate-user-emacs-file "snippets/"))
                                     (remove "~/.emacs.d/snippets" yas-snippet-dirs))))
  #+END_SRC


* Set verbosity to zero
  #+BEGIN_SRC emacs-lisp
    (setq yas-verbosity 0)
  #+END_SRC


* Disable snippet expansion on tab, it is annoying
 #+BEGIN_SRC emacs-lisp
   (with-eval-after-load 'yasnippet
     (define-key yas-minor-mode-map (kbd "TAB") nil)
     (define-key yas-minor-mode-map [(tab)] nil))
 #+END_SRC


* Use company-mode (if enabled) to expand snippet
  #+BEGIN_SRC emacs-lisp
    (defun iqbal-expand-yas-using-company ()
      (interactive)
      (condition-case err
          (call-interactively #'company-yasnippet)
        (error (when (and (string= (error-message-string err) "Cannot complete at point")
                          (yas--templates-for-key-at-point)))
               (yas-expand))))

    (defun iqbal-expand-yas ()
      (interactive)
      (call-interactively (cond ((bound-and-true-p company-mode) #'iqbal-expand-yas-using-company)
                                ((fboundp 'helm-yas-complete) #'helm-yas-complete)
                                (t #'yas-insert-snippet))))
  #+END_SRC


* Keybindings to expand yasnippets
  #+BEGIN_SRC emacs-lisp
    (with-eval-after-load 'yasnippet
      (define-key yas-minor-mode-map (kbd "<C-return>") #'iqbal-expand-yas))
  #+END_SRC


* Enable yasnippets
  #+BEGIN_SRC emacs-lisp
    (add-hook 'after-init-hook 'yas-global-mode)
  #+END_SRC

  
