* Install flycheck
  #+BEGIN_SRC emacs-lisp
    (iqbal-install-package 'flycheck)
  #+END_SRC


* Disable syntax checking on new-line
  #+BEGIN_SRC emacs-lisp
    (with-eval-after-load 'flycheck
      (setq flycheck-check-syntax-automatically (delq 'new-line flycheck-check-syntax-automatically)))
  #+END_SRC


* Check syntax automatically after a second of inactivity
  #+BEGIN_SRC emacs-lisp
    (setq flycheck-idle-change-delay 1)
  #+END_SRC


* Underline only errors in buffers
  #+BEGIN_SRC emacs-lisp
    (with-eval-after-load 'flycheck
      (set-face-attribute 'flycheck-warning nil :underline nil)
      (set-face-attribute 'flycheck-info nil :underline nil))
  #+END_SRC


* Change flycheck face to use straight lines instead of wavy lines
  #+BEGIN_SRC emacs-lisp
    (defun iqbal-flycheck-use-straight-lines ()
      (when (display-graphic-p)
        (dolist (face '(flycheck-error flycheck-warning flycheck-info))
          (let ((color (plist-get (face-attribute face :underline) :color)))
            (when color
              (set-face-attribute face nil :underline (list :style 'line :color color)))))))

    (add-hook 'flycheck-mode-hook #'iqbal-flycheck-use-straight-lines)
  #+END_SRC
