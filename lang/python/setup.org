* Setup Jedi for autocompletion
** Configuration
  Automatically start completion after inserting a dot
  #+begin_src emacs-lisp
    (setq jedi:complete-on-dot t)
  #+end_src

** Setup jedi for current buffer
   We simply need to call jedi:setup
   #+begin_src emacs-lisp
       (jedi:setup)
   #+end_src


* Setup Rope for refactoring
** Configuration
   1. Prevent rope from setting up keybindings, we'll set our keybindings
   #+begin_src emacs-lisp
     (setq ropemacs-enable-shortcuts nil)
   #+end_src
   
   2. Enable autoimport and specify the modules that will we autoimported
   #+begin_src emacs-lisp
     (setq ropemacs-enable-autoimport t)
     (setq ropemacs-autoimport-modules '("os" "shutil")) 
   #+end_src
   
** Start ropemacs
   Load pymacs and load rope, if not already loaded
   #+begin_src emacs-lisp
     (unless (featurep 'pymacs)
       (load "pymacs")
       (pymacs-load "ropemacs" "rope-"))
   #+end_src
  
  
* Setup flycheck for error checking
** Enable flycheck-mode
  #+begin_src emacs-lisp
    (flycheck-mode-on-safe)
  #+end_src
  
** Use pylint for syntax checking
   #+begin_src emacs-lisp
     (flycheck-select-checker 'python-pylint)
   #+end_src


* Use django style comments with fill-column
  #+begin_src emacs-lisp
    (setq python-fill-docstring-style 'django)
  #+end_src


* Use nosetests for testing
  #+begin_src emacs-lisp
    (when (locate-library "nose")
      (load "nose"))
  #+end_src


* Setup code folding
  Enable "hs-minor-mode"
  #+begin_src emacs-lisp 
    (hs-minor-mode)
  #+end_src


* Use ipython if available
  #+begin_src emacs-lisp
    (when (executable-find "ipython") 
      (setq
       python-shell-interpreter "ipython"
       python-shell-prompt-regexp "In \\[[0-9]+\\]: "
       python-shell-prompt-output-regexp "Out\\[[0-9]+\\]: "
       python-shell-completion-setup-code
       "from IPython.core.completerlib import module_completion"
       python-shell-completion-module-string-code
       "';'.join(module_completion('''%s'''))\n"
       python-shell-completion-string-code
       "';'.join(get_ipython().Completer.all_completions('''%s'''))\n"))
  #+end_src


* Flash current line after a jump to definition
  #+begin_src emacs-lisp
    (defadvice jedi:goto-definition (after highlight-current-line
                                           (&optional other-window deftype use-cache index))
      "Flash the current line after jedi jump"
      (sit-for 0.1)
      (iqbal-highlight-line))
    
    (ad-activate 'jedi:goto-definition)
  #+end_src
