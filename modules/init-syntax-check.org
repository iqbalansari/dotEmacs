* Install flycheck
  #+begin_src emacs-lisp
    (el-get 'sync 'flycheck)
  #+end_src


* Underline only errors in buffers
** Disable underlining provided by flycheck
   We will add a custom function that
   will underline only errors
   #+begin_src emacs-lisp
     (setq flycheck-highlighting-mode nil)
   #+end_src

** Add a custom function for underlining errors
   #+begin_src emacs-lisp
     (defun iqbal-add-lines-for-errors (err)
       (flycheck-error-with-buffer err
         (when (equal (flycheck-error-level err) 'error)
           (pcase-let* ((`(,beg . ,end) (flycheck-error-region-for-mode
                                         err 'lines))
                        (overlay (make-overlay beg end))
                        (level (flycheck-error-level err))
                        (category (flycheck-error-level-overlay-category level)))
             (overlay-put overlay 'flycheck-overlay t)
             (overlay-put overlay 'flycheck-error err)
             (overlay-put overlay 'category category)
             (when flycheck-indication-mode
               (overlay-put overlay 'before-string
                            (flycheck-error-level-make-fringe-icon
                             level flycheck-indication-mode)))
             (overlay-put overlay 'help-echo (flycheck-error-message err))
             overlay))))
     
     (eval-after-load 'flycheck
       '(add-to-list 'flycheck-process-error-functions #'iqbal-add-lines-for-errors))
   #+end_src


* Display errors in a pos-tip
** Ensure that popup is installed
   #+begin_src emacs-lisp
     (el-get 'sync 'pos-tip)
     (require 'pos-tip)
   #+end_src

** Custom function to display errors
   The following function displays the errors at a point
   in a popup
   #+begin_src emacs-lisp
     (defun iqbal-display-messages-in-popup (errors)
       ;; Do not interfere with autocomplete popups
       (unless (or (popup-live-p ac-menu) (popup-live-p ac-quick-help))
         (let ((messages (remove-if-not 'identity (mapcar #'flycheck-error-message errors))))
           (when messages
             ;; Showing/hiding popups triggers a text change which in turn
             ;; triggers syntax check
             (setq inhibit-modification-hooks t)
             (pos-tip-show (mapconcat (lambda (message) (concat "  " message "  ")) 
                                                       messages 
                                                       "\n"))
             (setq inhibit-modification-hooks nil)))))
     
     (setq flycheck-display-errors-function #'iqbal-display-messages-in-popup)
   #+end_src
